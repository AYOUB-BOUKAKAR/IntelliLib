<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<VBox xmlns="http://javafx.com/javafx/21" 
      xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="com.intellilib.controllers.ManageBorrowController"
      spacing="10"
      style="-fx-padding: 20;">
    
    <!-- Title -->
    <Label text="Gestion des Emprunts" 
           style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;" />
    
    <!-- Form Section -->
    <GridPane hgap="10" vgap="10">
        <Label text="Livre:" GridPane.rowIndex="0" GridPane.columnIndex="0" />
        <ComboBox fx:id="bookCombo" GridPane.rowIndex="0" GridPane.columnIndex="1" 
                  prefWidth="300" />
        
        <Label text="Membre:" GridPane.rowIndex="1" GridPane.columnIndex="0" />
        <ComboBox fx:id="memberCombo" GridPane.rowIndex="1" GridPane.columnIndex="1" 
                  prefWidth="300" />
        
        <Label text="Date de retour:" GridPane.rowIndex="2" GridPane.columnIndex="0" />
        <DatePicker fx:id="dueDatePicker" GridPane.rowIndex="2" GridPane.columnIndex="1" 
                    prefWidth="300" />
    </GridPane>
    
    <!-- Form Buttons -->
    <HBox spacing="10">
        <Button fx:id="saveButton" text="Enregistrer" onAction="#handleSave" 
                style="-fx-background-color: #4CAF50; -fx-text-fill: white;" />
        <Button fx:id="cancelButton" text="Annuler" onAction="#handleCancel" 
                style="-fx-background-color: #f44336; -fx-text-fill: white;" />
    </HBox>
    
    <!-- Table Section -->
    <TableView fx:id="borrowTable" VBox.vgrow="ALWAYS">
        <columns>
            <TableColumn text="ID" fx:id="idColumn" />
            <TableColumn text="Livre" fx:id="bookTitleColumn" />
            <TableColumn text="Membre" fx:id="memberNameColumn" />
            <TableColumn text="Date emprunt" fx:id="borrowDateColumn" />
            <TableColumn text="Date retour" fx:id="dueDateColumn" />
            <TableColumn text="Date retour réel" fx:id="returnDateColumn" />
            <TableColumn text="Retourné" fx:id="returnedColumn" />
        </columns>
    </TableView>
    
    <!-- Table Action Buttons -->
    <HBox spacing="10">
        <Button fx:id="returnButton" text="Marquer comme retourné" onAction="#handleReturn" 
                style="-fx-background-color: #2196F3; -fx-text-fill: white;" />
        <Button text="Supprimer" onAction="#handleDelete" 
                style="-fx-background-color: #FF9800; -fx-text-fill: white;" />
    </HBox>
    
</VBox>