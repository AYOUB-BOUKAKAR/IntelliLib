<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<VBox spacing="20.0" alignment="TOP_CENTER" xmlns="http://javafx.com/javafx/21" 
      xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="com.intellilib.controllers.MemberDashboardController"
      styleClass="dashboard-container"
      stylesheets="@../css/member-dashboard.css">

    <!-- Title -->
    <Label text="Tableau de Bord Membre" styleClass="dashboard-title" />

    <!-- Welcome section - THIS IS WHERE THE welcomeLabel SHOULD BE -->
    <VBox styleClass="welcome-card" spacing="10">
        <Label fx:id="welcomeLabel" styleClass="welcome-title" />
        <HBox spacing="30" alignment="CENTER_LEFT">
            <VBox styleClass="stat-card">
                <Label text="Emprunts Actifs" styleClass="stat-label" />
                <Label fx:id="activeBorrowingsLabel" styleClass="stat-value" />
            </VBox>
            <VBox styleClass="stat-card">
                <Label text="Livres en Retard" styleClass="stat-label" />
                <Label fx:id="overdueBooksLabel" styleClass="stat-value warning" />
            </VBox>
            <VBox styleClass="stat-card">
                <Label text="Amendes" styleClass="stat-label" />
                <Label fx:id="finesLabel" styleClass="stat-value" />
            </VBox>
            <VBox styleClass="stat-card">
                <Label text="Total EmpruntÃ©s" styleClass="stat-label" />
                <Label fx:id="totalBorrowedLabel" styleClass="stat-value" />
            </VBox>
        </HBox>
    </VBox>

    <!-- Recent borrowings table -->
    <VBox styleClass="section" spacing="15">
        <HBox alignment="CENTER_LEFT" spacing="10">
            <Label text="Derniers Emprunts" styleClass="section-title" />
            <Button text="Actualiser" onAction="#refreshDashboard" styleClass="refresh-button" />
        </HBox>
        <TableView fx:id="recentBooksTable" styleClass="data-table" maxHeight="300">
            <columns>
                <TableColumn text="Livre" fx:id="bookTitleColumn" prefWidth="200" />
                <TableColumn text="Date d'Emprunt" fx:id="borrowDateColumn" prefWidth="120" />
                <TableColumn text="Date de Retour PrÃ©vue" fx:id="dueDateColumn" prefWidth="140" />
                <TableColumn text="Date de Retour" fx:id="returnDateColumn" prefWidth="120" />
                <TableColumn text="Statut" fx:id="statusColumn" prefWidth="100" />
            </columns>
        </TableView>
    </VBox>

    <!-- Action buttons -->
    <HBox spacing="15" alignment="CENTER">
        <Button text="ðŸ“š Parcourir les Livres" onAction="#browseBooks" styleClass="action-button" />
        <Button text="ðŸ“– Mes Emprunts" onAction="#viewMyBorrowings" styleClass="action-button" />
        <Button text="ðŸ’° Mes Amendes" onAction="#viewMyFines" styleClass="action-button" />
        <Button text="ðŸ‘¤ Modifier Profil" onAction="#updateProfile" styleClass="action-button" />
        <Button text="ðŸŽ¯ Recommandations" onAction="#viewRecommendations" styleClass="action-button" />
        <Button text="ðŸ“œ Historique" onAction="#viewReadingHistory" styleClass="action-button" />
    </HBox>

    <!-- Logout button -->
    <HBox alignment="CENTER_RIGHT" styleClass="logout-section">
        <Button text="DÃ©connexion" onAction="#logout" styleClass="logout-button" />
    </HBox>
</VBox>